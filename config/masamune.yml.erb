<%
  add_path :var_dir, get_path(:root_dir, 'var'), :mkdir => true
  add_path :run_dir, get_path(:var_dir, 'run'), :mkdir => true
  add_path :tmp_dir, get_path(:var_dir, 'tmp'), :mkdir => true
  add_path :warehouse_dir, get_path(:var_dir, 'warehouse'), :mkdir => true
%>
---
  paths:
    - data_dir: 's3://bucket/data'
  hive:
    database: masamune
    options:
      - --hiveconf: 'hive.metastore.warehouse.dir=<%= get_path(:warehouse_dir) %>'
  postgres:
    database: masamune
    username: <%= %x{whoami} %>
  s3cmd:
    options:
      - --config: <%= ENV['HOME'] %>/.s3cfg
  elastic_mapreduce:
    path: elastic-mapreduce
    jobflows:
      build: 'j-BUILD'
    templates:
      list_with_state:
        command: --list --state %state
        default:
          state: RUNNING
    enabled: <%= ARGV.include?('-j') || ARGV.include?('--jobflow') %>
    options:
      - --credentials: <%= ENV['HOME'] %>/.amazon/credentials.json
